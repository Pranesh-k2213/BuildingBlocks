{% extends "company/base.html" %}
{% load crispy_forms_tags %}
{% block title %}
    Request
{% endblock %}
{% block content %}
    <h2 class="display-2">Place Request</h2>
    <div class="row my-5 justify-center-around">
        <div class="col-6">
            <table class="table table-striped table-hover">
                <thead>
                    <tr>
                        <th scope='col'>Name</th>
                        <th scope='col'>Quantity</th>
                        <th scope='col'>Unit</th>
                        <th scope="col">Delete</th>
                    </tr>
                </thead>
                <tbody>
                    {% for bill_item in bill_items %}
                    <tr>
                        <th scope="row">{{ bill_item.item_name }}</th>
                        <td>{{ bill_item.quantity }}{{enable}}</td>
                        <td>{{  bill_item.unit  }}</td>
                        <td><a href="{% url 'material-delete' bill_item.pk %}" class="p1 btn btn-danger btn-sm">delete</a></td>
                    </tr>
                    {% empty %}
                    <tr>
                        <th scope="row" colspan="4" class="table-active"> No items avilable </th>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            <div class="row my-4">
                <div class="col-6">
                    <a href="{% url 'siteer-dashboard' %}" class="btn btn-outline-secondary">Back to dashboard</a>
                </div>
                {% if enable %}
                <div class="col offset-2">
                    <a class="btn btn-primary" data-bs-toggle="offcanvas" href="#offcanvasExample" role="button">Place Request</a>
                </div>
                {% else %}
                <div class="col offset-2">
                    <button class="btn btn-primary" disabled>Place Request</button>
                </div>
                {% endif %}
            </div>
        </div>
        <div class="col-3 offset-1">
            <form method="POST">
                {% csrf_token %}
                <fieldset class="form-group">
                    <legend class="border-bottom mb-3"> Add Item </legend>
                    {{ form|crispy }}
                </fieldset>
                <div class="form-group">
                    <button class="btn my-4 btn-success" type="submit">Add</button>
                </div>
            </form>
        </div>
    </div>
    {% if enable %}
    <div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasExample">
        <div class="offcanvas-header">
          <h3 class="offcanvas-title mt-4 mb-3" id="offcanvasExampleLabel">Confirm Request</h5>
          <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas"></button>
        </div>
        <div class="offcanvas-body">
            <div>
                The listed materials will placed as request to the manager, and cannot be reversed. Do you want to continue.
                <br>
                <a href="{% url 'material-request-success' bill_items.first.project.pk %}" class="btn btn-warning my-4">Confirm Request</a>
            </div>
      </div>
    </div>
    {% endif %}
{% endblock %}